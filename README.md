<h1 align="center">
  <a href="#" target="_blank">Wangyue Uniapp</a>
</h1>


## âš™ï¸ çŽ¯å¢ƒ

- node>=18
- pnpm>=7.30
- Vue Official>=2.1.10
- TypeScript>=5.0

## &#x1F4C2; å¿«é€Ÿå¼€å§‹

æ‰§è¡Œ `pnpm create wangyue` åˆ›å»ºé¡¹ç›®
æ‰§è¡Œ `pnpm i` å®‰è£…ä¾èµ–
æ‰§è¡Œ `pnpm dev` è¿è¡Œ `H5`
æ‰§è¡Œ `pnpm dev:mp` è¿è¡Œ `å¾®ä¿¡å°ç¨‹åº`

## ðŸ“¦ è¿è¡Œï¼ˆæ”¯æŒçƒ­æ›´æ–°ï¼‰

- webå¹³å°ï¼š `pnpm dev:h5`, ç„¶åŽæ‰“å¼€ [http://localhost:9000/](http://localhost:9000/)ã€‚
- weixinå¹³å°ï¼š`pnpm dev:mp` ç„¶åŽæ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œå¯¼å…¥æœ¬åœ°æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©æœ¬é¡¹ç›®çš„`dist/dev/mp-weixin` æ–‡ä»¶ã€‚
- APPå¹³å°ï¼š`pnpm dev:app`, ç„¶åŽæ‰“å¼€ `HBuilderX`ï¼Œå¯¼å…¥åˆšåˆšç”Ÿæˆçš„`dist/dev/app` æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©è¿è¡Œåˆ°æ¨¡æ‹Ÿå™¨(å¼€å‘æ—¶ä¼˜å…ˆä½¿ç”¨)ï¼Œæˆ–è€…è¿è¡Œçš„å®‰å“/iosåŸºåº§ã€‚(å¦‚æžœæ˜¯ `å®‰å“` å’Œ `é¸¿è’™` å¹³å°ï¼Œåˆ™ä¸ç”¨è¿™ä¸ªæ–¹å¼ï¼Œå¯ä»¥æŠŠæ•´ä¸ªunibesté¡¹ç›®å¯¼å…¥åˆ°hbxï¼Œé€šè¿‡hbxçš„èœå•æ¥è¿è¡Œåˆ°å¯¹åº”çš„å¹³å°ã€‚)

## ðŸ”— å‘å¸ƒ

- webå¹³å°ï¼š `pnpm build:h5`ï¼Œæ‰“åŒ…åŽçš„æ–‡ä»¶åœ¨ `dist/build/h5`ï¼Œå¯ä»¥æ”¾åˆ°webæœåŠ¡å™¨ï¼Œå¦‚nginxè¿è¡Œã€‚å¦‚æžœæœ€ç»ˆä¸æ˜¯æ”¾åœ¨æ ¹ç›®å½•ï¼Œå¯ä»¥åœ¨ `manifest.config.ts` æ–‡ä»¶çš„ `h5.router.base` å±žæ€§è¿›è¡Œä¿®æ”¹ã€‚
- weixinå¹³å°ï¼š`pnpm build:mp`, æ‰“åŒ…åŽçš„æ–‡ä»¶åœ¨ `dist/build/mp-weixin`ï¼Œç„¶åŽé€šè¿‡å¾®ä¿¡å¼€å‘è€…å·¥å…·å¯¼å…¥ï¼Œå¹¶ç‚¹å‡»å³ä¸Šè§’çš„â€œä¸Šä¼ â€æŒ‰é’®è¿›è¡Œä¸Šä¼ ã€‚
- APPå¹³å°ï¼š`pnpm build:app`, ç„¶åŽæ‰“å¼€ `HBuilderX`ï¼Œå¯¼å…¥åˆšåˆšç”Ÿæˆçš„`dist/build/app` æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©å‘è¡Œ - APPäº‘æ‰“åŒ…ã€‚(å¦‚æžœæ˜¯ `å®‰å“` å’Œ `é¸¿è’™` å¹³å°ï¼Œåˆ™ä¸ç”¨è¿™ä¸ªæ–¹å¼ï¼Œå¯ä»¥æŠŠæ•´ä¸ªunibesté¡¹ç›®å¯¼å…¥åˆ°hbxï¼Œé€šè¿‡hbxçš„èœå•æ¥å‘è¡Œåˆ°å¯¹åº”çš„å¹³å°ã€‚)

## ðŸ”Œ WebSocket

- é…ç½®é¡¹ï¼š`VITE_WS_URL`ï¼ˆåŒ…å«åŸŸåä¸Žç«¯ç‚¹ï¼‰ã€`VITE_WS_ENABLE`ï¼ˆæ˜¯å¦å¯ç”¨ï¼‰
- ç™»å½•åŽè‡ªåŠ¨è¿žæŽ¥ï¼Œé€€å‡ºç™»å½•åŽæ–­å¼€ï¼›`setTopics([])`/`setTopics('')` ä¼šæ¸…ç©ºè®¢é˜…å¹¶ä¸»åŠ¨æ–­å¼€
- å¯æŒ‰éœ€é…ç½®é‡è¿žæ¬¡æ•°ï¼š`wsManager.configure({ maxRetries: 3 })`
- æ³¨æ„ï¼šé¿å…åœ¨æ—¥å¿—ä¸­è¾“å‡ºåŒ…å« token çš„å®Œæ•´ URL

ç¤ºä¾‹ï¼š

```ts
import { wsManager } from '@/ws'

wsManager.setTopics(['job:123', 'chat:room-1'])
wsManager.on('notice', (data) => {
  console.log('notice:', data)
})
```

## åˆ†æ”¯è¯´æ˜Ž

- main: ä¸»åˆ†æ”¯ï¼Œä½¿ç”¨ wot-design-ui ç»„ä»¶åº“
- i18n: å›½é™…åŒ–åˆ†æ”¯ï¼Œä½¿ç”¨ wot-design-ui ç»„ä»¶åº“
- base-sard-ui: åŸºç¡€åˆ†æ”¯ï¼Œä½¿ç”¨ sard-ui ç»„ä»¶åº“
- sard-ui-i18n: åŸºäºŽ base-sard-ui åˆ†æ”¯ï¼Œæ·»åŠ  i18n å¤šè¯­è¨€åŠŸèƒ½
